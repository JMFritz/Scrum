@model Scrum.Models.Project
<!doctype html>

<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.28/css/uikit.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.28/js/uikit.min.js"></script>
    <link href="~/css/Projects/Detail.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.28/js/uikit-icons.min.js"></script>
</head>
<body>

    <ul class="uk-breadcrumb">
        <li>
            
        </li>
    </ul>

    <div uk-grid>
        <div class="uk-width-3-4 projectInfo">
            <div class="uk-card uk-card-default uk-card-body">
                <h1 class="uk-heading-line uk-text-center"><span>@Model.Title</span></h1>
                <p>@Model.Description</p>
                <p>
                    <div class="uk-offcanvas-content">
                    <button type="button" class="uk-button uk-button-primary"><i class="fa fa-plus" aria-hidden="true"></i> @Html.ActionLink("Task", "Create", "Tasks", new { id = Model.ProjectId })</button>
                        <button class="uk-button uk-button-danger uk-margin-small-center " type="button" uk-toggle="target: #offcanvas-nav-stuff"><i class="fa fa-wrench uk-text-large uk-text-bold" aria-hidden="true"></i></button>

                        <div id="offcanvas-nav-stuff" uk-offcanvas="flip: true; overlay: true">
                            <div class="uk-offcanvas-bar uk-flex uk-flex-column">

                                <h2>Assigned to You @ViewBag.CurrentUser</h2>
                                <table class="uk-table uk-table-justify uk-table-divider">
                                    <thead>
                                        <tr>
                                            <th class="uk-width-small">Task</th>
                                            <th>Status</th>
                                            <th>Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var task in @ViewBag.Tasks)
                                        {
                                            <tr>
                                                <td>@task.Description</td>
                                                <td>
                                                    @if (@task.Complete)
                                                    {
                                                        <i class="fa fa-check" aria-hidden="true" style="font-size: 30px; color: green;"></i>
                                                    }
                                                    @if (!@task.Complete)
                                                    {
                                                        <i class="fa fa-times" aria-hidden="true" style="font-size: 30px; color: tomato;"></i>
                                                    }
                                                </td>
                                                <td><button class="uk-button view" type="button">@Html.ActionLink("Work", "Details", "Tasks", new { id = @task.TaskId })</button></td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </p>
           </div>
        </div>
        <div class="uk-width-1-4 teamInfo">
            <div class="uk-card uk-card-default uk-card-body">
                <h2 class="uk-heading-line uk-text-center"><span>Team</span></h2>
                @foreach (var member in @ViewBag.Team)
                {
                    <p class="uk-text-center"><i class="fa fa-user" aria-hidden="true"></i> @member</p>
                }
                <p>
                    <a href="@Url.Action("AddUser", "Projects", new { id = Model.ProjectId })">
                        <button type="button" class="uk-button uk-button-primary">
                            <i class="fa fa-plus" aria-hidden="true"></i>
                        </button>
                    </a>
                </p>
            </div>
        </div>
        <div class="uk-width-1-2">
            <div class="uk-card uk-card-default uk-card-body">
                <ul class="uk-subnav uk-subnav-pill uk-text-center" uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
                    <li><a href="#">Stream</a></li>
                    <li><a href="#">User Stories</a></li>
                    <li><a href="#">Tools</a></li>
                </ul>

                <ul class="uk-switcher uk-margin">
                    <li>
                        <h3 class="uk-heading-line uk-text-center"><span>Update Stream</span></h3>
                        <p><a href="@Url.Action("Create", "Updates", new { id = Model.ProjectId })">
                            <button type="button" class="uk-button uk-button-primary">
                                <i class="fa fa-plus" aria-hidden="true"></i>
                            </button>
                        </a></p>
                        @foreach (var update in @ViewBag.Updates)
                        {
                            @if (@update.UpdateType.Name == "Beef")
                            {
                                <article class="uk-comment uk-comment-primary uk-background-cover" style="background-color: #FF9999">
                                    <header class="uk-comment-header uk-grid-small uk-flex-middle" uk-grid>
                                        <div class="uk-width-auto">
                                            <img class="uk-comment-avatar" src="~/images/download.jpg" width="30" height="30" alt="">
                                        </div>
                                        <div class="uk-width-expand">
                                            <h4 class="uk-comment-title uk-margin-remove uk-text-small"><a class="uk-link-reset" href="#">@update.User</a></h4>
                                            <ul class="uk-comment-meta uk-subnav uk-subnav-divider uk-margin-remove-top">
                                                <li style="color: black;">@update.TimeStamp</li>
                                                <li><i class="fa fa-thumbs-down" aria-hidden="true" style="color: black; font-size: 20px;"></i></li>
                                            </ul>
                                        </div>
                                    </header>
                                    <div class="uk-comment-body">
                                        <p style="color: black;">@update.Note</p>
                                    </div>
                                </article>
                            }
                            @if (@update.UpdateType.Name == "Change")
                            {
                                <article class="uk-comment uk-comment-primary uk-background-cover" style="background-color: lightyellow">
                                    <header class="uk-comment-header uk-grid-small uk-flex-middle" uk-grid>
                                        <div class="uk-width-auto">
                                            <img class="uk-comment-avatar" src="~/images/download.jpg" width="30" height="30" alt="">
                                        </div>
                                        <div class="uk-width-expand">
                                            <h4 class="uk-comment-title uk-margin-remove uk-text-small"><a class="uk-link-reset" href="#">@update.User</a></h4>
                                            <ul class="uk-comment-meta uk-subnav uk-subnav-divider uk-margin-remove-top">
                                                <li style="color: black;">@update.TimeStamp</li>
                                                <li><i class="fa fa-scissors uk-text-large" aria-hidden="true" style="color: black; font-size: 20px;"></i></li>
                                            </ul>
                                        </div>
                                    </header>
                                    <div class="uk-comment-body">
                                        <p style="color: black;">@update.Note</p>
                                    </div>
                                </article>
                            }
                            @if (@update.UpdateType.Name == "Note")
                            {
                                <article class="uk-comment uk-comment-primary uk-background-cover" style="background-color: aliceblue">
                                    <header class="uk-comment-header uk-grid-small uk-flex-middle" uk-grid>
                                        <div class="uk-width-auto">
                                            <img class="uk-comment-avatar" src="~/images/download.jpg" width="30" height="30" alt="">
                                        </div>
                                        <div class="uk-width-expand">
                                            <h4 class="uk-comment-title uk-margin-remove uk-text-small"><a class="uk-link-reset" href="#">@update.User</a></h4>
                                            <ul class="uk-comment-lead uk-subnav uk-subnav-divider uk-margin-remove-top">
                                                <li style="color: black;">@update.TimeStamp</li>
                                                <li><i class="fa fa-comment" aria-hidden="true" style="color: black; font-size: 20px;"></i></li>
                                            </ul>
                                        </div>
                                    </header>
                                    <div class="uk-comment-body">
                                        <p style="color: black;">@update.Note</p>
                                    </div>
                                </article>
                            }
                            <br />
                        }
                    </li>
                    <li>
                        <h3 class="uk-heading-line uk-text-center"><span>User Stories</span></h3>
                        <ul class="uk-list uk-list-striped">
                            @foreach (var story in Model.UserStories)
                            {
                                <li>@story.Spec</li>
                            }
                        </ul>
                        <button type="button" class="uk-button uk-button-primary addStory" id="@Model.ProjectId"><i class="fa fa-plus" aria-hidden="true"></i></button>
                        <div id="storyForm"></div>
                    </li>
                    <li>
                        <h3 class="uk-heading-line uk-text-center"><span>Tools</span></h3>
                        @foreach (var join in Model.ProjectTools)
                        {
                            <p>@join.Tool.Name</p>
                        }
                        <h3>Add New Tool</h3>
                        @using (Html.BeginForm())
                        {
                            @Html.DropDownList("ToolId")
                            <input type="submit" value="Add Tool" class="uk-button uk-button-primary" aria-hidden="true"/>
                        }
                    </li>
                </ul>
            </div>
        </div>
        <div class="uk-width-1-2">
            <div class="uk-card uk-card-default uk-card-body">
                <h2 class="uk-heading-line uk-text-center"><span>Sprints</span></h2>
                <div class="progress">
                    @foreach (var data in @ViewBag.SprintCollection)
                    {
                        @if (@data.Total >= 1 && @data.Total <= 10)
                        {
                            <div class="progress-bar progress-bar-primary" role="progressbar" style="width:@data.Total%; border:solid 1px black">
                                @data.Name
                            </div>
                        }
                        @if (@data.Total >= 11 && @data.Total <= 29)
                        {
                            <div class="progress-bar progress-bar-warning" role="progressbar" style="width:@data.Total%; border:solid 1px black">
                                @data.Name
                            </div>
                        }
                        @if (@data.Total >= 30 && @data.Total <= 49)
                        {
                            <div class="progress-bar progress-bar-info" role="progressbar" style="width:@data.Total%; border:solid 1px black">
                                @data.Name
                            </div>
                        }
                        @if (@data.Total >= 50 && @data.Total <= 100)
                        {
                            <div class="progress-bar progress-bar-success" role="progressbar" style="width:@data.Total%; border:solid 1px black">
                                @data.Name
                            </div>
                        }
                    }
                </div>
                <table class="uk-table uk-table-justify uk-table-divider">
                    <thead>
                        <tr>
                            <th class="uk-width-small">Sprint</th>
                            <th>Start</th>
                            <th>End</th>
                            <th>Jump</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var sprint in @ViewBag.Sprints)
                        {
                            <tr>
                                <td>@sprint.Name</td>
                                <td>@sprint.StartDate</td>
                                <td>@sprint.EndDate</td>
                                <td><button class="uk-button view" type="button">@Html.ActionLink("View", "Details", "Sprints", new { id = sprint.SprintId })</button></td>
                            </tr>
                        }
                    </tbody>
                </table>
                <button type="button" class="createSprint uk-button uk-button-primary" id="@Model.ProjectId"><i class="fa fa-plus" aria-hidden="true"></i></button>
                <div id="sprintForm"></div>
            </div>
        </div>
    </div>
    <p>@Html.ActionLink("Back to List", "Index")</p>
</body>
</html>